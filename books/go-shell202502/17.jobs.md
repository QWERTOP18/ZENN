---
title: "jobs"
---
# プロセスグループとは
```$ls | cat | grep go```のようなコマンドラインを実行するとき、```ls```、```cat```,```grep go```それぞれに対してプロセスが作成される。この3つのプロセスを1つの存在のように扱うのがプロセスグループであり、この一塊のプロセスのことをジョブという。



p32[詳解LINUXカーネル第3版](

## シェルのジョブ管理とシグナル操作

::::details ジョブ操作
### フォアグラウンド / バックグラウンド操作
| 種類 | コマンド / シグナル | 意味・動作 |
|------|--------------------|------------|
| フォアグラウンド / バックグラウンド | `fg [%ジョブ番号]` | バックグラウンドのジョブをフォアグラウンドに移動 |
| | `bg [%ジョブ番号]` | 停止中のジョブをバックグラウンドで再開 |
| | `&` | コマンドをバックグラウンドで実行 (`ls &`) |

### ジョブ管理
| 種類 | コマンド / シグナル | 意味・動作 |
|------|--------------------|------------|
| ジョブ管理 | `jobs` | 現在のジョブ一覧を表示 |
| | `disown [%ジョブ番号]` | ジョブをシェルの管理から外す |
| | `nohup コマンド &` | 端末を閉じてもコマンドを継続実行 (`nohup sleep 100 &`) |

### シグナル操作
| 種類 | コマンド / シグナル | 意味・動作 |
|------|--------------------|------------|
| シグナル送信 | `Ctrl+C (SIGINT)` | フォアグラウンドプロセスを強制終了 |
| | `Ctrl+Z (SIGTSTP)` | フォアグラウンドプロセスを一時停止 |
| | `kill -SIGSTOP <PID>` | プロセスを一時停止 (再開可能) |
| | `kill -SIGCONT <PID>` | 停止したプロセスを再開 |
| | `kill -SIGTERM <PID>` | プロセスを終了 (通常の終了) |
| | `kill -SIGKILL <PID>` | プロセスを強制終了 (即時終了) |

### プロセスグループ操作
| 種類 | コマンド / シグナル | 意味・動作 |
|------|--------------------|------------|
| プロセスグループ管理 | `kill -SIGSTOP -<PGID>` | プロセスグループ全体を停止 |
| | `kill -SIGCONT -<PGID>` | プロセスグループ全体を再開 |
| | `tcsetpgrp` | 端末の制御を特定のプロセスグループに渡す |
::::

# セッションとは
セッションとはこれらのプロセスグループの集合である。特に特定の端末で開始されたセッションをログインセッションと呼び、そのうちの一つが必ずファアグランドとなり、端末へのアクセスが許可される。バックグラウンドプロセスが端末へのアクセスを行おうとすると、端末はSIGTTINまたはSIGTTOUシグナルを受け取ります。p32[詳解LINUXカーネル第3版]

| 用語                 | 説明 |
|----------------------|--------------------------------|
| **セッション (Session)** | 1つのシェル (またはプロセス) から派生するプロセスの集合 |
| **セッションリーダー**   | `setsid()` で新しいセッションを作る最初のプロセス (通常はシェル) |
| **プロセスグループ**     | `setpgid()` で作られるジョブ単位のプロセス群 |
| **ジョブ (Job)**       | 1つのプロセスグループをシェルが管理 (`fg`, `bg`) |
| **プロセス (Process)** | 個々の実行単位 (プログラム) |




## スレッドグループとは
### スレッドグループ (Thread Group)
- Linux では、プロセスは「スレッドの集合」として扱われる。
- スレッドグループ ID (TGID) を使って、どのスレッドが同じプロセスに属しているかを管理する。
- getpid() の値は、実は TGID (スレッドグループ ID) を返している。
### 特徴
すべてのスレッドが同じ PID を持つ (Linux の場合)
→ Linux ではスレッドも clone() で生成されるが、同じ TGID に属する ことで「同じプロセスの一部」として扱われる。
スレッドグループ単位でのシグナル処理
→ pthread_kill() で 特定のスレッド にシグナルを送れるが、kill(pid, sig) は 全スレッド (プロセス単位) に影響する。
スレッドは個別の TID (Thread ID) を持つが、同じ TGID を共有する。

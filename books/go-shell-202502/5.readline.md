---
title: "Readlineã‚’ä½¿ãŠã†ï¼ï¼"
---
# REPLã¨ã¯

[readline](https://pkg.go.dev/github.com/chzyer/readline#section-readme)


# GNU Readlineã‚’ä½¿ãŠã†
```go get```
```go.sum```ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œ```go.mod```ã«readlineãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚


# REPLã®å®Ÿè£…
```go :repl/repl.go
package repl

import (
	"fmt"
	"github.com/chzyer/readline"
	"shell/sh_exec"
	"strings"
)

const PS1 = "ğŸ $ "

func Start() {
	rl, err := readline.New(PS1)
	if err != nil {
		panic(err)
	}
	defer rl.Close()

	for {
		line, err := rl.Readline()
		if err != nil {
			fmt.Println("Error reading input:", err)
			return
		}
		line = strings.TrimSpace(line)
		args := strings.Fields(line)
		if len(args) == 0 {
			continue
		}

		sh_exec.ExecSimpleCommand(args)
	}
}
```

```go :main.go
package main

import (
	"fmt"
	"os/user"
	"shell/repl"
)

func main() {
	user, err := user.Current()
	if err != nil {
		panic(err)
	}
	fmt.Printf("Hello, %s!\n", user.Username)
	repl.Start()
}
```
```ğŸ $ ```ã¨ã„ã†ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã ã‚ã†ã‹ã€‚```ls```ã‚„```cat main.go```ãªã©ã¨å…¥åŠ›ã—ã¦è©¦ã—ã¦ã¿ã‚ˆã†ã€‚^Aã‚„^Eã‚‚è©¦ã—ã¦ã»ã—ã„ã€‚â†‘â†“ã‚„^rãªã©ã§å±¥æ­´ã®æ¤œç´¢ã‚‚è¡Œã†ã“ã¨ã‚‚ã§ãã‚‹ï¼
ä»Šå›æˆ‘ã€…ã¯ä½•ã®æ°—å…¼ã­ã‚‚ãªããƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«çµµæ–‡å­—ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ãŒã€çµµæ–‡å­—ã®ã‚ˆã†ãªãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã®å–ã‚Šæ‰±ã„ã«ã¯æ·±ã„è€ƒæ…®ãŒã‚ã‚Šãã†ã ã€‚

ã“ã“ã§æˆ‘ã€…ã¯REPLã‚’æŒã¤ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ‰‹ã«å…¥ã‚ŒãŸãŒã€æœ€ã‚‚åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‚‹```cd```ã¯ãã¡ã‚“ã¨å‹•ä½œã™ã‚‹ã ã‚ã†ã‹ã€‚ã¾ãŸã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã•ã›ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚‚å¿…è¦ã ã€‚
```sh
ğŸ $ pwd
/Users/yui/GolandProjects/GO_SHELL/srcs
ğŸ $ cd ..
ğŸ $ pwd
/Users/yui/GolandProjects/GO_SHELL/srcs
ğŸ $ exit
Error:exit: exec: "exit": executable file not found in $PATH
```
cdã‚„exitã¯ç‰¹åˆ¥ãªå®Ÿè£…ã‚’æ–½ã™å¿…è¦ãŒã‚ã‚Šãã†ã ã€‚
ã¨ã‚Šã‚ãˆãšã¯ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’çµ‚äº†ã•ã›ã‚‹ãŸã‚ã«ã¯^Cã‚„^Dã‚’é€ã‚ã†ã€‚